!function(){"use strict";const e=document.querySelector("#profile-edit-button"),t=document.querySelector("#profile-add-button"),s=document.querySelector("#profile-image-button");class r{constructor(e,t,s,r,i){this._name=e.name,this._link=e.link,this._id=e._id,this.cardData=e.cardData,this._isLiked=e.isLiked,this._cardSelector=t,this._handleImageClick=s,this._handleLikeClick=r,this._handleDeleteSubmit=i}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_setEventListeners(){this._likeButton.addEventListener("click",(()=>{this._handleLikeClick(this)})),this._deleteButton.addEventListener("click",(()=>{this._handleDeleteSubmit(this._id,this)})),this._cardImage.addEventListener("click",(()=>{this._handleImageClick({name:this._name,link:this._link})}))}_isLiked(){return this._isLiked}_renderLikes(){this._isLiked?this._likeButton.classList.add("card__like-button_active"):this._likeButton.classList.remove("card__like-button_active")}updateLikes(e){this._isLiked=e,this._renderLikes()}removeCard(){this._cardElement.remove(),this._cardElement=null}generateCard(){return this._cardElement=this._getTemplate(),this._cardImage=this._cardElement.querySelector(".card__image"),this._cardTitle=this._cardElement.querySelector(".card__title"),this._likeButton=this._cardElement.querySelector(".card__like-button"),this._deleteButton=this._cardElement.querySelector(".card__delete-button"),this._setEventListeners(),this._renderLikes(),this._cardTitle.textContent=this._name,this._cardImage.src=this._link,this._cardImage.alt=this._name,this._cardElement}}class i{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t,this._inputList=[...this._formElement.querySelectorAll(this._inputSelector)],this._buttonElement=this._formElement.querySelector(this._submitButtonSelector)}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_disableButton(){this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0}_enableButton(){this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1}_toggleButtonState(){this._hasInvalidInput()?this._disableButton():this._enableButton()}_hasInvalidInput(){return!this._inputList.every((e=>e.validity.valid))}_setEventListeners(){this._inputList.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this._toggleButtonState(this._inputList,this._buttonElement)}))}))}resetFormValidation(){this._inputList.forEach((e=>{this._hideInputError(e)})),this._disableButton()}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault(),this._disableButton()})),this._setEventListeners()}}class n{constructor(e,t){let{items:s,renderer:r}=e;this._items=s,this._renderer=r,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}class o{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keyup",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keyup",this._handleEscClose)}_handleEscClose(e){e.preventDefault(),"Escape"===e.key&&this.close()}setEventListeners(){this._popupElement.addEventListener("mousedown",(e=>{(e.target.classList.contains("modal_opened")||e.target.classList.contains("modal__close-button"))&&this.close()}))}}class a extends o{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t,this._inputList=this._popupForm.querySelectorAll(".modal__input"),this._submitButton=this._popupForm.querySelector(".modal__button"),this._submitButtonText=this._submitButton.textContent}close(){super.close()}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this.close(),this._popupForm.reset()})),super.setEventListeners()}setLoading(e){this._submitButton.textContent=e?"Saving...":this._submitButtonText}}const l=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}_serverResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then(this._serverResponse)}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then(this._serverResponse)}getAppInfo(){return Promise.all([this.getInitialCards(),this.getUserInfo()])}createNewCard(e){return fetch(`${this._baseUrl}/cards`,{method:"POST",body:JSON.stringify(e),headers:this._headers}).then(this._serverResponse)}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._serverResponse)}likeCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers}).then(this._serverResponse)}dislikeCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers}).then(this._serverResponse)}updateUserInfo(e){let{name:t,about:s}=e;return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",body:JSON.stringify({name:t,about:s}),headers:this._headers}).then(this._serverResponse)}updateAvatar(e){return fetch(`${this._baseUrl}/users/me/avatar/`,{method:"PATCH",body:JSON.stringify({avatar:e}),headers:this._headers}).then(this._serverResponse)}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"9aa267fe-3315-41ab-a072-2d6dbd5ca77b","Content-Type":"application/json"}});let h;l.getAppInfo().then((e=>{let[t,s]=e;c.setUserInfo(s.name,s.about),c.setAvatar(s.avatar),h=new n({items:t.reverse(),renderer:e=>{const t=f(e);h.addItem(t)}},".cards__list"),h.renderItems()})).catch((e=>{console.error(e)}));const d={},u=new class extends o{constructor(e){super({popupSelector:e}),this._previewImage=this._popupElement.querySelector(".modal__image"),this._previewTitle=this._popupElement.querySelector("#modal-preview")}open(e){this._previewTitle.textContent=e.name,this._previewImage.src=e.link,this._previewImage.alt=e.name,super.open()}}("#modal-image"),c=new class{constructor(e,t,s){this._userNameElement=document.querySelector(e),this._userDescriptionElement=document.querySelector(t),this._avatarElement=document.querySelector(s)}getUserInfo(){return{name:this._userNameElement.textContent,about:this._userDescriptionElement.textContent}}setUserInfo(e,t){this._userNameElement.textContent=e,this._userDescriptionElement.textContent=t}setAvatar(e){this._avatarElement.src=e}}(".profile__title",".profile__paragraph",".profile__image"),_=new class extends o{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t,this._submitButton=this._popupForm.querySelector(".modal__button"),this._submitButtonText=this._submitButton.textContent}setSubmitAction(e){this._handleFormSubmit=e}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit()}))}setLoading(e){this._submitButton.textContent=e?"Saving...":this._submitButtonText}}("#modal-confirm"),m=new a("#modal-add",(e=>{m.setLoading(!0),l.createNewCard(e).then((e=>{const t=f(e);h.addItem(t),m.close()})).catch((e=>{console.error(e)})).finally((()=>{m.setLoading(!1)}))})),p=new a("#modal-edit",(e=>{p.setLoading(!0),l.updateUserInfo(e).then((()=>{c.setUserInfo(e.name,e.about),p.close()})).catch((e=>{console.error(e)})).finally((()=>{p.setLoading(!1)}))})),v=new a("#modal-profile-image",(e=>{v.setLoading(!0),l.updateAvatar(e.link).then((e=>{c.setAvatar(e.avatar),v.close()})).catch((e=>{console.error(e)})).finally((()=>{v.setLoading(!1)}))}));function E(e){e._isLiked?l.dislikeCard(e._id).then((()=>{e.updateLikes()})).catch((e=>{console.error(e)})):l.likeCard(e._id).then((()=>{e.updateLikes(e._id)})).catch((e=>{console.error(e)}))}function b(e){u.open(e)}function L(e,t){_.open(),_.setSubmitAction((()=>{_.setLoading(!0),l.deleteCard(e).then((()=>{t.removeCard(),_.close()})).catch((e=>{console.log(e)})).finally((()=>{_.setLoading(!1)}))}))}function f(e){return new r(e,"#card-template",b,E,L).generateCard()}var S;s.addEventListener("click",(()=>{v.open()})),e.addEventListener("click",(()=>{!function(){const{name:e,about:t}=c.getUserInfo();document.querySelector("#input-name").value=e,document.querySelector("#input-description").value=t}(),d["profile-form"].resetFormValidation(),p.open()})),t.addEventListener("click",(()=>{m.open()})),v.setEventListeners(),m.setEventListeners(),p.setEventListeners(),_.setEventListeners(),u.setEventListeners(),S={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},Array.from(document.querySelectorAll(S.formSelector)).forEach((e=>{const t=new i(S,e),s=e.getAttribute("name");s&&(d[s]=t,t.enableValidation())}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVlELEVBQzNCQSxFQUFVbEgsbUJBQ1osRyIsInNvdXJjZXMiOlsid2VicGFjazovL3RyaXBsZXRlbi8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly90cmlwbGV0ZW4vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3RyaXBsZXRlbi8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly90cmlwbGV0ZW4vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdHJpcGxldGVuLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3RyaXBsZXRlbi8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3RyaXBsZXRlbi8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3RyaXBsZXRlbi8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm0uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbi8vICAge1xuLy8gICAgIG5hbWU6IFwiSWNlIGNhc3RsZXNcIixcbi8vICAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNjk1Mzc4MjAxOTI5LWM3ZTY4YTgxMDJiZD9peGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0QmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz0yODI0JnE9ODBcIixcbi8vICAgfSxcbi8vICAge1xuLy8gICAgIG5hbWU6IFwiUGluayB3YWxsc1wiLFxuLy8gICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE2OTYwNzU2MTkwOTEtZGVkYWUyNWIxZjY1P2l4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTI4MzAmcT04MFwiLFxuLy8gICB9LFxuLy8gICB7XG4vLyAgICAgbmFtZTogXCJIb3VzZSBvbiBhIHRyZWVcIixcbi8vICAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTQ3MzkzNDI5LTA5OGRkMTIyMDkxYT9peGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0QmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz0zMDg3JnE9ODBcIixcbi8vICAgfSxcbi8vICAge1xuLy8gICAgIG5hbWU6IFwiQ2h1cmNoIG9mIEhhbGxncmltdXJcIixcbi8vICAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNjk0Nzc0NDMzMDcyLWQ2ZjA3OTc5ZTNlZT9peGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0QmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz0zMDg3JnE9ODBcIixcbi8vICAgfSxcbi8vICAge1xuLy8gICAgIG5hbWU6IFwiTmlnaHQgdG93blwiLFxuLy8gICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE2OTUyNDk3NDc1MzAtNTc0NjBhODhhZDgwP2l4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTMwODcmcT04MFwiLFxuLy8gICB9LFxuLy8gICB7XG4vLyAgICAgbmFtZTogXCJBbnRlbG9wZSBjYW55b25cIixcbi8vICAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTA1NTIxMzc3Nzc0LTEwM2E4Y2MyZjczNT9peGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0QmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz0zMDg3JnE9ODBcIixcbi8vICAgfSxcbi8vIF07XG5cbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBhZGROZXdDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWFkZC1idXR0b25cIik7XG5leHBvcnQgY29uc3QgY2hhbmdlSW1hZ2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIiNwcm9maWxlLWltYWdlLWJ1dHRvblwiXG4pO1xuXG5leHBvcnQgY29uc3Qgc2VsZWN0b3JzID0ge1xuICBjYXJkTGlzdDogXCIuY2FyZHNfX2xpc3RcIixcbiAgZWRpdEZvcm1Qb3B1cDogXCIjbW9kYWwtZWRpdFwiLFxuICBhZGRGb3JtUG9wdXA6IFwiI21vZGFsLWFkZFwiLFxuICBkZWxldGVDYXJkUG9wdXA6IFwiI21vZGFsLWNvbmZpcm1cIixcbiAgY2hhbmdlSW1hZ2VQb3B1cDogXCIjbW9kYWwtcHJvZmlsZS1pbWFnZVwiLFxuICBwcmV2aWV3UG9wdXA6IFwiI21vZGFsLWltYWdlXCIsXG4gIHByb2ZpbGVGb3JtOiBcInByb2ZpbGUtZm9ybVwiLFxuICBhZGRGb3JtOiBcImFkZC1mb3JtXCIsXG4gIHByZXZpZXdJbWFnZTogXCIubW9kYWxfX2ltYWdlXCIsXG4gIHByZXZpZXdUaXRsZTogXCIjbW9kYWwtcHJldmlld1wiLFxuICBtb2RhbHM6IFwiLm1vZGFsXCIsXG4gIHByb2ZpbGVUaXRsZTogXCIucHJvZmlsZV9fdGl0bGVcIixcbiAgcHJvZmlsZVBhcmFncmFwaDogXCIucHJvZmlsZV9fcGFyYWdyYXBoXCIsXG4gIHByb2ZpbGVJbWFnZTogXCIucHJvZmlsZV9faW1hZ2VcIixcbiAgaW5wdXROYW1lOiBcIiNpbnB1dC1uYW1lXCIsXG4gIGlucHV0RGVzY3JpcHRpb246IFwiI2lucHV0LWRlc2NyaXB0aW9uXCIsXG4gIGlucHV0VGl0bGU6IFwiI2lucHV0LXRpdGxlXCIsXG4gIGlucHV0VXJsOiBcIiNpbnB1dC11cmxcIixcbiAgY2FyZFRlbXBsYXRlOiBcIiNjYXJkLXRlbXBsYXRlXCIsXG59O1xuXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcbn07XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoXG4gICAgZGF0YSxcbiAgICBjYXJkU2VsZWN0b3IsXG4gICAgaGFuZGxlSW1hZ2VDbGljayxcbiAgICBoYW5kbGVMaWtlQ2xpY2ssXG4gICAgaGFuZGxlRGVsZXRlU3VibWl0XG4gICkge1xuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcbiAgICB0aGlzLl9pZCA9IGRhdGEuX2lkO1xuICAgIHRoaXMuY2FyZERhdGEgPSBkYXRhLmNhcmREYXRhO1xuICAgIHRoaXMuX2lzTGlrZWQgPSBkYXRhLmlzTGlrZWQ7XG5cbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrID0gaGFuZGxlTGlrZUNsaWNrO1xuICAgIHRoaXMuX2hhbmRsZURlbGV0ZVN1Ym1pdCA9IGhhbmRsZURlbGV0ZVN1Ym1pdDtcbiAgfVxuXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrKHRoaXMpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVTdWJtaXQodGhpcy5faWQsIHRoaXMpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHsgbmFtZTogdGhpcy5fbmFtZSwgbGluazogdGhpcy5fbGluayB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIF9pc0xpa2VkKCkge1xuICAgIHJldHVybiB0aGlzLl9pc0xpa2VkO1xuICB9XG5cbiAgX3JlbmRlckxpa2VzKCkge1xuICAgIGlmICh0aGlzLl9pc0xpa2VkKSB7XG4gICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgICB9XG4gIH1cblxuICB1cGRhdGVMaWtlcyhpc0xpa2VkKSB7XG4gICAgdGhpcy5faXNMaWtlZCA9IGlzTGlrZWQ7XG4gICAgdGhpcy5fcmVuZGVyTGlrZXMoKTtcbiAgfVxuXG4gIHJlbW92ZUNhcmQoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xuICB9XG5cbiAgZ2VuZXJhdGVDYXJkKCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcblxuICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gICAgdGhpcy5fY2FyZFRpdGxlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiXG4gICAgKTtcblxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fcmVuZGVyTGlrZXMoKTtcblxuICAgIHRoaXMuX2NhcmRUaXRsZS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XG5cbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLmlucHV0RXJyb3JDbGFzcztcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcblxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG5cbiAgICB0aGlzLl9pbnB1dExpc3QgPSBbXG4gICAgICAuLi50aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpLFxuICAgIF07XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvclxuICAgICk7XG4gIH1cblxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cblxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gXCJcIjtcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfVxuICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gIH1cblxuICBfZGlzYWJsZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XG4gIH1cblxuICBfZW5hYmxlQnV0dG9uKCkge1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gIH1cblxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XG4gICAgICB0aGlzLl9kaXNhYmxlQnV0dG9uKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX2VuYWJsZUJ1dHRvbigpO1xuICB9XG5cbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICByZXR1cm4gIXRoaXMuX2lucHV0TGlzdC5ldmVyeSgoaW5wdXRFbCkgPT4gaW5wdXRFbC52YWxpZGl0eS52YWxpZCk7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZXZ0KSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSh0aGlzLl9pbnB1dExpc3QsIHRoaXMuX2J1dHRvbkVsZW1lbnQpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICByZXNldEZvcm1WYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9kaXNhYmxlQnV0dG9uKCk7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9kaXNhYmxlQnV0dG9uKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gIH1cblxuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGV2dCkgPT4ge1xuICAgICAgaWYgKFxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX29wZW5lZFwiKSB8fFxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX19jbG9zZS1idXR0b25cIilcbiAgICAgICkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYnV0dG9uXCIpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblRleHQgPSB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQ7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIGNvbnN0IGlucHV0VmFsdWVzID0ge307XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiBpbnB1dFZhbHVlcztcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xuICAgIH0pO1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBzZXRMb2FkaW5nKGlzTG9hZGluZykge1xuICAgIGlmIChpc0xvYWRpbmcpIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2aW5nLi4uXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuX3N1Ym1pdEJ1dHRvblRleHQ7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgXCIuLi9wYWdlcy9pbmRleC5jc3NcIjtcblxuaW1wb3J0IHtcbiAgc2VsZWN0b3JzLFxuICBjb25maWcsXG4gIHByb2ZpbGVFZGl0QnV0dG9uLFxuICBhZGROZXdDYXJkQnV0dG9uLFxuICBjaGFuZ2VJbWFnZUJ1dHRvbixcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xuXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aENvbmZpcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybS5qc1wiO1xuXG4vLyBBUElcblxuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjFcIixcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246IFwiOWFhMjY3ZmUtMzMxNS00MWFiLWEwNzItMmQ2ZGJkNWNhNzdiXCIsXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gIH0sXG59KTtcblxubGV0IGNhcmRTZWN0aW9uO1xuXG5hcGlcbiAgLmdldEFwcEluZm8oKVxuICAudGhlbigoW2luaXRpYWxDYXJkcywgdXNlckRhdGFdKSA9PiB7XG4gICAgdXNlckluZm8uc2V0VXNlckluZm8odXNlckRhdGEubmFtZSwgdXNlckRhdGEuYWJvdXQpO1xuICAgIHVzZXJJbmZvLnNldEF2YXRhcih1c2VyRGF0YS5hdmF0YXIpO1xuICAgIGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXG4gICAgICB7XG4gICAgICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMucmV2ZXJzZSgpLFxuICAgICAgICByZW5kZXJlcjogKGRhdGEpID0+IHtcbiAgICAgICAgICBjb25zdCBjYXJkID0gcmVuZGVyQ2FyZChkYXRhKTtcbiAgICAgICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmQpO1xuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHNlbGVjdG9ycy5jYXJkTGlzdFxuICAgICk7XG4gICAgY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoKTtcbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IHtcbiAgICBjb25zb2xlLmVycm9yKGVycik7XG4gIH0pO1xuXG4vLyBWYWxpZGF0aW9uXG5cbmNvbnN0IGZvcm1WYWxpZGF0b3JzID0ge307XG5cbmNvbnN0IGVuYWJsZVZhbGlkYXRpb24gPSAoY29uZmlnKSA9PiB7XG4gIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5mb3JtU2VsZWN0b3IpKTtcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcbiAgICBjb25zdCB2YWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGZvcm1FbGVtZW50KTtcbiAgICBjb25zdCBmb3JtTmFtZSA9IGZvcm1FbGVtZW50LmdldEF0dHJpYnV0ZShcIm5hbWVcIik7XG4gICAgaWYgKGZvcm1OYW1lKSB7XG4gICAgICBmb3JtVmFsaWRhdG9yc1tmb3JtTmFtZV0gPSB2YWxpZGF0b3I7XG4gICAgICB2YWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuICAgIH1cbiAgfSk7XG59O1xuXG4vLyBDcmVhdGUgSW5zdGFuY2VzXG5cbmNvbnN0IGNhcmRQcmV2aWV3UG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2Uoc2VsZWN0b3JzLnByZXZpZXdQb3B1cCk7XG5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKFxuICBzZWxlY3RvcnMucHJvZmlsZVRpdGxlLFxuICBzZWxlY3RvcnMucHJvZmlsZVBhcmFncmFwaCxcbiAgc2VsZWN0b3JzLnByb2ZpbGVJbWFnZVxuKTtcblxuY29uc3QgZGVsZXRlQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aENvbmZpcm0oc2VsZWN0b3JzLmRlbGV0ZUNhcmRQb3B1cCk7XG5cbmNvbnN0IGFkZENhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHNlbGVjdG9ycy5hZGRGb3JtUG9wdXAsIChjYXJkRGF0YSkgPT4ge1xuICBhZGRDYXJkUG9wdXAuc2V0TG9hZGluZyh0cnVlKTtcbiAgYXBpXG4gICAgLmNyZWF0ZU5ld0NhcmQoY2FyZERhdGEpXG4gICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgY29uc3QgY2FyZCA9IHJlbmRlckNhcmQocmVzKTtcbiAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZCk7XG4gICAgICBhZGRDYXJkUG9wdXAuY2xvc2UoKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBhZGRDYXJkUG9wdXAuc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgfSk7XG59KTtcblxuY29uc3QgUHJvZmlsZUVkaXRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICBzZWxlY3RvcnMuZWRpdEZvcm1Qb3B1cCxcbiAgKHVzZXJEYXRhKSA9PiB7XG4gICAgUHJvZmlsZUVkaXRQb3B1cC5zZXRMb2FkaW5nKHRydWUpO1xuICAgIGFwaVxuICAgICAgLnVwZGF0ZVVzZXJJbmZvKHVzZXJEYXRhKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICB1c2VySW5mby5zZXRVc2VySW5mbyh1c2VyRGF0YS5uYW1lLCB1c2VyRGF0YS5hYm91dCk7XG4gICAgICAgIFByb2ZpbGVFZGl0UG9wdXAuY2xvc2UoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICB9KVxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICBQcm9maWxlRWRpdFBvcHVwLnNldExvYWRpbmcoZmFsc2UpO1xuICAgICAgfSk7XG4gIH1cbik7XG5cbmNvbnN0IHVwZGF0ZUF2YXRhclBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIHNlbGVjdG9ycy5jaGFuZ2VJbWFnZVBvcHVwLFxuICAoZGF0YSkgPT4ge1xuICAgIHVwZGF0ZUF2YXRhclBvcHVwLnNldExvYWRpbmcodHJ1ZSk7XG4gICAgYXBpXG4gICAgICAudXBkYXRlQXZhdGFyKGRhdGEubGluaylcbiAgICAgIC50aGVuKCh1c2VyKSA9PiB7XG4gICAgICAgIHVzZXJJbmZvLnNldEF2YXRhcih1c2VyLmF2YXRhcik7XG4gICAgICAgIHVwZGF0ZUF2YXRhclBvcHVwLmNsb3NlKCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgfSlcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgdXBkYXRlQXZhdGFyUG9wdXAuc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgICB9KTtcbiAgfVxuKTtcblxuLy8gRnVuY3Rpb25zXG5cbmZ1bmN0aW9uIGZpbGxQcm9maWxlRm9ybSgpIHtcbiAgY29uc3QgeyBuYW1lLCBhYm91dCB9ID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMuaW5wdXROYW1lKS52YWx1ZSA9IG5hbWU7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLmlucHV0RGVzY3JpcHRpb24pLnZhbHVlID0gYWJvdXQ7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUxpa2VDbGljayhjYXJkKSB7XG4gIGlmIChjYXJkLl9pc0xpa2VkKSB7XG4gICAgYXBpXG4gICAgICAuZGlzbGlrZUNhcmQoY2FyZC5faWQpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIGNhcmQudXBkYXRlTGlrZXMoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBhcGlcbiAgICAgIC5saWtlQ2FyZChjYXJkLl9pZClcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgY2FyZC51cGRhdGVMaWtlcyhjYXJkLl9pZCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaGFuZGxlSW1hZ2VDbGljayhpbWFnZURhdGEpIHtcbiAgY2FyZFByZXZpZXdQb3B1cC5vcGVuKGltYWdlRGF0YSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZURlbGV0ZUJ1dHRvbihjYXJkSUQsIGNhcmQpIHtcbiAgZGVsZXRlQ2FyZFBvcHVwLm9wZW4oKTtcbiAgZGVsZXRlQ2FyZFBvcHVwLnNldFN1Ym1pdEFjdGlvbigoKSA9PiB7XG4gICAgZGVsZXRlQ2FyZFBvcHVwLnNldExvYWRpbmcodHJ1ZSk7XG4gICAgYXBpXG4gICAgICAuZGVsZXRlQ2FyZChjYXJkSUQpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIGNhcmQucmVtb3ZlQ2FyZCgpO1xuICAgICAgICBkZWxldGVDYXJkUG9wdXAuY2xvc2UoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgfSlcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgZGVsZXRlQ2FyZFBvcHVwLnNldExvYWRpbmcoZmFsc2UpO1xuICAgICAgfSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiByZW5kZXJDYXJkKGRhdGEpIHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxuICAgIGRhdGEsXG4gICAgc2VsZWN0b3JzLmNhcmRUZW1wbGF0ZSxcbiAgICBoYW5kbGVJbWFnZUNsaWNrLFxuICAgIGhhbmRsZUxpa2VDbGljayxcbiAgICBoYW5kbGVEZWxldGVCdXR0b25cbiAgKTtcbiAgcmV0dXJuIGNhcmQuZ2VuZXJhdGVDYXJkKCk7XG59XG5cbi8vIEV2ZW50IExpc3RlbmVyc1xuXG5jaGFuZ2VJbWFnZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICB1cGRhdGVBdmF0YXJQb3B1cC5vcGVuKCk7XG59KTtcblxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgZmlsbFByb2ZpbGVGb3JtKCk7XG4gIGZvcm1WYWxpZGF0b3JzW3NlbGVjdG9ycy5wcm9maWxlRm9ybV0ucmVzZXRGb3JtVmFsaWRhdGlvbigpO1xuICBQcm9maWxlRWRpdFBvcHVwLm9wZW4oKTtcbn0pO1xuXG5hZGROZXdDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGFkZENhcmRQb3B1cC5vcGVuKCk7XG59KTtcblxuLy8gSW5pdGlhbGl6ZSBpbnN0YW5jZXNcblxudXBkYXRlQXZhdGFyUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmFkZENhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuUHJvZmlsZUVkaXRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuZGVsZXRlQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5jYXJkUHJldmlld1BvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmVuYWJsZVZhbGlkYXRpb24oY29uZmlnKTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgaGVhZGVycyB9KSB7XG4gICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XG4gICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XG4gIH1cblxuICBfc2VydmVyUmVzcG9uc2UocmVzKSB7XG4gICAgcmV0dXJuIHJlcy5vayA/IHJlcy5qc29uKCkgOiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgfVxuXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy5fc2VydmVyUmVzcG9uc2UpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuX3NlcnZlclJlc3BvbnNlKTtcbiAgfVxuXG4gIGdldEFwcEluZm8oKSB7XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLmdldEluaXRpYWxDYXJkcygpLCB0aGlzLmdldFVzZXJJbmZvKCldKTtcbiAgfVxuXG4gIGNyZWF0ZU5ld0NhcmQoZGF0YSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLl9zZXJ2ZXJSZXNwb25zZSk7XG4gIH1cblxuICBkZWxldGVDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy5fc2VydmVyUmVzcG9uc2UpO1xuICB9XG5cbiAgbGlrZUNhcmQoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLl9zZXJ2ZXJSZXNwb25zZSk7XG4gIH1cblxuICBkaXNsaWtlQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuX3NlcnZlclJlc3BvbnNlKTtcbiAgfVxuXG4gIHVwZGF0ZVVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lLFxuICAgICAgICBhYm91dCxcbiAgICAgIH0pLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuX3NlcnZlclJlc3BvbnNlKTtcbiAgfVxuXG4gIHVwZGF0ZUF2YXRhcihhdmF0YXIpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyL2AsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBhdmF0YXIgfSksXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy5fc2VydmVyUmVzcG9uc2UpO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XG4gICAgdGhpcy5fcHJldmlld0ltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpO1xuICAgIHRoaXMuX3ByZXZpZXdUaXRsZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLXByZXZpZXdcIik7XG4gIH1cbiAgb3BlbihkYXRhKSB7XG4gICAgdGhpcy5fcHJldmlld1RpdGxlLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX3ByZXZpZXdJbWFnZS5zcmMgPSBkYXRhLmxpbms7XG4gICAgdGhpcy5fcHJldmlld0ltYWdlLmFsdCA9IGRhdGEubmFtZTtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IodXNlck5hbWVTZWxlY3RvciwgdXNlckRlc2NyaXB0aW9uU2VsZWN0b3IsIGF2YXRhclNlbGVjdG9yKSB7XG4gICAgdGhpcy5fdXNlck5hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyTmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl91c2VyRGVzY3JpcHRpb25FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIHVzZXJEZXNjcmlwdGlvblNlbGVjdG9yXG4gICAgKTtcbiAgICB0aGlzLl9hdmF0YXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhdmF0YXJTZWxlY3Rvcik7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdGhpcy5fdXNlck5hbWVFbGVtZW50LnRleHRDb250ZW50LFxuICAgICAgYWJvdXQ6IHRoaXMuX3VzZXJEZXNjcmlwdGlvbkVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgfTtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKG5hbWUsIGFib3V0KSB7XG4gICAgdGhpcy5fdXNlck5hbWVFbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLl91c2VyRGVzY3JpcHRpb25FbGVtZW50LnRleHRDb250ZW50ID0gYWJvdXQ7XG4gIH1cblxuICBzZXRBdmF0YXIoYXZhdGFyKSB7XG4gICAgdGhpcy5fYXZhdGFyRWxlbWVudC5zcmMgPSBhdmF0YXI7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19idXR0b25cIik7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uVGV4dCA9IHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudDtcbiAgfVxuXG4gIHNldFN1Ym1pdEFjdGlvbihhY3Rpb24pIHtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gYWN0aW9uO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQoKTtcbiAgICB9KTtcbiAgfVxuXG4gIHNldExvYWRpbmcoaXNMb2FkaW5nKSB7XG4gICAgaWYgKGlzTG9hZGluZykge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIjtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5fc3VibWl0QnV0dG9uVGV4dDtcbiAgICB9XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJwcm9maWxlRWRpdEJ1dHRvbiIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImFkZE5ld0NhcmRCdXR0b24iLCJjaGFuZ2VJbWFnZUJ1dHRvbiIsIkNhcmQiLCJjb25zdHJ1Y3RvciIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwiaGFuZGxlTGlrZUNsaWNrIiwiaGFuZGxlRGVsZXRlU3VibWl0IiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9pZCIsImNhcmREYXRhIiwiX2lzTGlrZWQiLCJpc0xpa2VkIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2hhbmRsZUxpa2VDbGljayIsIl9oYW5kbGVEZWxldGVTdWJtaXQiLCJfZ2V0VGVtcGxhdGUiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2xpa2VCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiX2RlbGV0ZUJ1dHRvbiIsIl9jYXJkSW1hZ2UiLCJfcmVuZGVyTGlrZXMiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJ1cGRhdGVMaWtlcyIsInJlbW92ZUNhcmQiLCJfY2FyZEVsZW1lbnQiLCJnZW5lcmF0ZUNhcmQiLCJfY2FyZFRpdGxlIiwidGV4dENvbnRlbnQiLCJzcmMiLCJhbHQiLCJGb3JtVmFsaWRhdG9yIiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dExpc3QiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2J1dHRvbkVsZW1lbnQiLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2VFbCIsImlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9kaXNhYmxlQnV0dG9uIiwiZGlzYWJsZWQiLCJfZW5hYmxlQnV0dG9uIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX2hhc0ludmFsaWRJbnB1dCIsImV2ZXJ5IiwiaW5wdXRFbCIsImZvckVhY2giLCJldnQiLCJyZXNldEZvcm1WYWxpZGF0aW9uIiwiZW5hYmxlVmFsaWRhdGlvbiIsInByZXZlbnREZWZhdWx0IiwiU2VjdGlvbiIsIl9yZWYiLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJpdGVtIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJvcGVuIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfcG9wdXBGb3JtIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfc3VibWl0QnV0dG9uIiwiX3N1Ym1pdEJ1dHRvblRleHQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dFZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJyZXNldCIsInNldExvYWRpbmciLCJpc0xvYWRpbmciLCJhcGkiLCJiYXNlVXJsIiwiaGVhZGVycyIsIl9iYXNlVXJsIiwiX2hlYWRlcnMiLCJfc2VydmVyUmVzcG9uc2UiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZ2V0SW5pdGlhbENhcmRzIiwiZmV0Y2giLCJ0aGVuIiwiZ2V0VXNlckluZm8iLCJnZXRBcHBJbmZvIiwiYWxsIiwiY3JlYXRlTmV3Q2FyZCIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiZGVsZXRlQ2FyZCIsImNhcmRJZCIsImxpa2VDYXJkIiwiZGlzbGlrZUNhcmQiLCJ1cGRhdGVVc2VySW5mbyIsIl9yZWYyIiwiYWJvdXQiLCJ1cGRhdGVBdmF0YXIiLCJhdmF0YXIiLCJhdXRob3JpemF0aW9uIiwiY2FyZFNlY3Rpb24iLCJpbml0aWFsQ2FyZHMiLCJ1c2VyRGF0YSIsInVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJzZXRBdmF0YXIiLCJyZXZlcnNlIiwiY2FyZCIsInJlbmRlckNhcmQiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJlcnJvciIsImZvcm1WYWxpZGF0b3JzIiwiY2FyZFByZXZpZXdQb3B1cCIsIl9wcmV2aWV3SW1hZ2UiLCJfcHJldmlld1RpdGxlIiwidXNlck5hbWVTZWxlY3RvciIsInVzZXJEZXNjcmlwdGlvblNlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJfdXNlck5hbWVFbGVtZW50IiwiX3VzZXJEZXNjcmlwdGlvbkVsZW1lbnQiLCJfYXZhdGFyRWxlbWVudCIsImRlbGV0ZUNhcmRQb3B1cCIsInNldFN1Ym1pdEFjdGlvbiIsImFjdGlvbiIsImFkZENhcmRQb3B1cCIsImZpbmFsbHkiLCJQcm9maWxlRWRpdFBvcHVwIiwidXBkYXRlQXZhdGFyUG9wdXAiLCJ1c2VyIiwiaW1hZ2VEYXRhIiwiaGFuZGxlRGVsZXRlQnV0dG9uIiwiY2FyZElEIiwibG9nIiwiY29uZmlnIiwiZmlsbFByb2ZpbGVGb3JtIiwiZm9ybVNlbGVjdG9yIiwiQXJyYXkiLCJmcm9tIiwidmFsaWRhdG9yIiwiZm9ybU5hbWUiLCJnZXRBdHRyaWJ1dGUiXSwic291cmNlUm9vdCI6IiJ9